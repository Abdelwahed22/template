<div class="container d-flex justify-content-center align-items-center min-vh-100 bg-light">

    <div class="card shadow-lg border-0" style="max-width: 450px; width: 100%; border-radius: 16px;">
        <div class="card-body p-4 p-md-5">

            <!-- Header with icon -->
            <div class="text-center mb-4">
                <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex p-3 mb-3">
                    <i class="bi bi-shield-lock-fill text-primary fs-1"></i>
                </div>
                <h2 class="fw-bold text-primary">إعادة تعيين كلمة المرور 🔐</h2>
                <p class="text-muted">أدخل الكود المرسل إلى بريدك الإلكتروني:</p>
                <p class="text-primary fw-bold">{{ email }}</p>
            </div>

            <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">

                <!-- Code field -->
                <div class="mb-3">
                    <label class="form-label">كود التحقق</label>
                    <input type="text" class="form-control form-control-lg text-center" style="letter-spacing: 0.5em;"
                        formControlName="code" [class.is-invalid]="f.code.invalid && f.code.touched"
                        placeholder="------" maxlength="6">
                    <div class="invalid-feedback">الكود يجب أن يكون 6 أرقام</div>
                </div>

                <!-- New password field -->
                <div class="mb-3">
                    <label class="form-label">كلمة المرور الجديدة</label>
                    <input type="password" class="form-control form-control-lg" formControlName="newPassword"
                        [class.is-invalid]="f.newPassword.invalid && f.newPassword.touched" placeholder="********">
                    <div class="invalid-feedback">يجب أن تكون 6 أحرف على الأقل</div>
                </div>

                <!-- Confirm password field -->
                <div class="mb-4">
                    <label class="form-label">تأكيد كلمة المرور</label>
                    <input type="password" class="form-control form-control-lg" formControlName="confirmPassword"
                        [class.is-invalid]="f.confirmPassword.invalid && f.confirmPassword.touched"
                        placeholder="********">
                    <div class="invalid-feedback">تأكيد كلمة المرور مطلوب</div>
                </div>

                <!-- Submit button -->
                <div class="d-grid mb-3">
                    <button type="submit" class="btn btn-primary btn-lg"
                        [disabled]="resetPasswordForm.invalid || isSubmitting">
                        <span *ngIf="!isSubmitting">تعيين كلمة المرور</span>
                        <span *ngIf="isSubmitting">
                            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                            جاري التحديث...
                        </span>
                    </button>
                </div>

                <!-- Back to login link -->
                <div class="text-center mt-4">
                    <span class="text-muted">تذكرت كلمة المرور؟ </span>
                    <a routerLink="/login" class="text-decoration-none fw-bold">تسجيل الدخول</a>
                </div>

            </form>

        </div>
    </div>
</div>